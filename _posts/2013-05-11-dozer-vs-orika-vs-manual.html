---
title: "Dozer vs Orika vs Manual"
layout: "post"
permalink: "/2013/05/dozer-vs-orika-vs-manual.html"
uuid: "2757051152007371573"
guid: "tag:blogger.com,1999:blog-1763451622132357586.post-2757051152007371573"
date: "2013-05-11 22:28:00"
updated: "2013-05-14 18:32:52"
description: 
blogger:
    siteid: "1763451622132357586"
    postid: "2757051152007371573"
    comments: "3"
categories: [performance, java, orika, dozer, blog]
comments: true
---

<div class="css-full-post-content js-full-post-content">
<div dir="ltr" style="text-align: left;" trbidi="on">Development of enterprise software often require creation of APIs for each application components. On implementation phase this involves mapping between API models on different layers of components (e.g. mapping persistence model to domain model to DTO). Such mapping often prone to boiler plate code, consuming development efforts and time.<br /><a name='more'></a><br />There are multiple libraries which aim to solve this problem:<br /><br /><ul style="text-align: left;"><li>some of them automate mapping only partially. For example Spring Framework's BeanUtils capabilities are limited with only primitive types and fields of only one class. It can not convert object hierarchy to another object hierarchy.</li><li>others provide full automation of mapping process (e.g. Dozer), they allow to handle complicated cases, like mapping lists of object to maps of primitives.&nbsp;Automation usually comes at a price of performance degradation. The more complicated model is converted the more time it will take to map objects. This is usually caused by the fact that mapping libraries often use reflection and dynamic type resolution to support generic logic of conversion.</li></ul><br />There is new player in the market of object mapping, called Orika. This library provide solution in automating mapping using code generation. Code is generated in the manner like it would be written by developers to map one bean to another. With Orika it takes just few minutes to add a library to the project and write couple lines of code to enable mapping between types. Everything else would be done by Orika it self.&nbsp;Though developers of Orika have prepare exhaustive functional documentation they did not provide any prove of performance efficiency.&nbsp;Lets compare all alternatives enumerated above:<br /><div><ul style="text-align: left;"><li><a href="http://dozer.sourceforge.net/">Dozer</a> — each bean is created using reflection, mapping is customized using XML and Java code.</li><li><a href="http://orika-mapper.github.io/orika-docs/index.html">Orika</a> — beans are created and initialized using code generated by library, mapping can be customized using Java code and own expression language.</li><li>Manual conversion — each bean is created and initialized with code written manually. All conversion is performed in Java code.</li></ul>Data model that has been used for test include combinations which usually appear in Java Beans, such as:<br /><ul><li>primitives</li><li>object types</li><li>collections</li><li>enums</li></ul><div>Source code of tests is <a href="https://github.com/galak/compare-java-converters" target="_blank">available at GitHub</a>.<br />Tests has been performed on:<br /><ul style="text-align: left;"><li>OS: Linux&nbsp;2.6.32&nbsp;x86_64</li><li>CPU: 2.0GHz 4MB cache × 8 cores</li><li>RAM: 16GB</li><li>JVM: -Xmx1g -Xms1g -XX:MaxPermSize=128m -XX:NewSize=512m -XX:MaxNewSize=512m -XX:SurvivorRatio=6 -XX:+UseCompressedOops -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+CMSIncrementalMode</li><li>Number of iterations&nbsp;1 000 000</li></ul>Major GC was not happened during test.<br />Following test results were received:</div></div><table><thead><tr><td><div style="text-align: center;"><span style="font-family: Courier New, Courier, monospace;"><b>Indicator </b></span></div></td><td><div style="text-align: center;"><span style="font-family: Courier New, Courier, monospace;"><b>Dozer</b></span></div></td><td><div style="text-align: center;"><span style="font-family: Courier New, Courier, monospace;"><b>Orika</b></span></div></td><td><div style="text-align: center;"><span style="font-family: Courier New, Courier, monospace;"><b>Manual</b></span></div></td></tr></thead><tbody><tr><td><span style="font-family: Courier New, Courier, monospace;">Min, nano seconds</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; 290 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; 21 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp;3 000</span></td></tr><tr><td><span style="font-family: Courier New, Courier, monospace;">Mid, nano seconds</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; 318 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; 32 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp;4 000</span></td></tr><tr><td><span style="font-family: Courier New, Courier, monospace;">90%, nano seconds</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; 390 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; 41 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp;5 000</span></td></tr><tr><td><span style="font-family: Courier New, Courier, monospace;">95%, nano seconds</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; 436 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; 45 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp;5 000</span></td></tr><tr><td><span style="font-family: Courier New, Courier, monospace;">99%, nano seconds</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; 534 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp; 54 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp;6 000</span></td></tr><tr><td><span style="font-family: Courier New, Courier, monospace;">99.9%, nano seconds</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; 730 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp;114 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; 33 000</span></td></tr><tr><td><span style="font-family: Courier New, Courier, monospace;">99.99%, nano seconds</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; 1 607 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; &nbsp;374 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp; 65 000</span></td></tr><tr><td><span style="font-family: Courier New, Courier, monospace;">99.999%, nano seconds</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; 7 574 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp;1 032 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp;580 000</span></td></tr><tr><td><span style="font-family: Courier New, Courier, monospace;">99.9999%, nano seconds</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp;21 171 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp; &nbsp;7 952 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp;1 387 000</span></td></tr><tr><td><span style="font-family: Courier New, Courier, monospace;">Max, nano seconds</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp;21 171 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp;222 581 000</span></td><td><span style="font-family: Courier New, Courier, monospace;">&nbsp;9 810 000</span></td></tr></tbody></table><br /><div>Orika has maximum latency which differs from general distribution. This latency appears only once at first conversion, when Orika actually perform code generation for mappers.<br />Orika's latency has considerable deviation form Manual mapping, this caused by unnecessary object recreations performed by Orika. For example, when string is shifted from on variable to another, new string is created using concatenation with empty string.  <br />In general test proved that Orika is is almost as efficient as manually written code and much more performant than Dozer.</div></div>
</div>
<div class="css-full-comments-content js-full-comments-content">
<div class="css-full-comment js-full-comment">
  <div class="css-comment-user-link js-comment-user-link">
  <a href="http://www.blogger.com/profile/00155780059348792464">
  <div class="css-comment-name js-comment-name">
    Raja Nagendra Kumar
  </div>
  </a>
  <div class="css-comment-date js-comment-date">
    2013-09-07T12:18:23.063Z
  </div>
  </div>
  <div class="css-comment-content js-comment-content">
    Would it not be good idea to generate code at build time, so that, it would be as fast as manual but without one writing the code..<br /><br />Not sure all the dto frameworks operate at runtime.. I wish them to be working at compile time.
  </div>
  <br/>
</div>
<div class="css-full-comment js-full-comment">
  <div class="css-comment-user-link js-comment-user-link">
  <a href="http://www.blogger.com/profile/16441329733931846533">
  <div class="css-comment-name js-comment-name">
    Jon Smith
  </div>
  </a>
  <div class="css-comment-date js-comment-date">
    2013-10-05T12:18:41.951Z
  </div>
  </div>
  <div class="css-comment-content js-comment-content">
    Этот комментарий был удален администратором блога.
  </div>
  <br/>
</div>
<div class="css-full-comment js-full-comment">
  <div class="css-comment-user-link js-comment-user-link">
  <a href="http://www.blogger.com/profile/16910067065508493885">
  <div class="css-comment-name js-comment-name">
    Gunnar Morling
  </div>
  </a>
  <div class="css-comment-date js-comment-date">
    2014-05-08T13:43:43.614Z
  </div>
  </div>
  <div class="css-comment-content js-comment-content">
    Raja, you might be interested in MapStruct (http://www.mapstruct.org/) which does exactly what you describe: it generates type-safe mapping code from Java interfaces at compile time, in your IDE as well as via Maven, Ant etc. (Disclaimer: I&#39;m working on MapStruct).<br /><br />--Gunnar<br />
  </div>
  <br/>
</div>
</div>